
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>UVWVARY &#8212; Goma User Manual 7.0.0 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'problem_description_file/boundary_conditions/fluid_momentum/uvwvary';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../../_static/goma.png" class="logo__image only-light" alt="Logo image">
    <img src="../../../_static/goma.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../../user_manual.html">
                        Goma User Manual
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../../user_manual.html">
                        Goma User Manual
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="uvwvary">
<h1><strong>UVWVARY</strong><a class="headerlink" href="#uvwvary" title="Permalink to this heading">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BC</span> <span class="o">=</span> <span class="p">{</span><span class="n">UVARY</span> <span class="o">|</span> <span class="n">VVARY</span> <span class="o">|</span> <span class="n">WVARY</span><span class="p">}</span> <span class="n">SS</span> <span class="o">&lt;</span><span class="n">bc_id</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">float_list</span><span class="p">]</span>
</pre></div>
</div>
<section id="description-usage">
<h2><strong>Description / Usage</strong><a class="headerlink" href="#description-usage" title="Permalink to this heading">#</a></h2>
<p><strong>(PCC/MOMENTUM)</strong></p>
<p>The <em>UVARY, VVARY</em> and <em>WVARY</em> boundary condition format is used to set variation in
X, Y, or Z velocity component, respectively, with respect to coordinates and time on a
specified sideset. Each such specification is made on a separate input card.</p>
<p>The <em>UVARY, VVARY</em>, and <em>WVARY</em> cards each require user-defined functions be supplied
in the file user_bc.c. Four separate C functions must be defined for a boundary
condition: velo_vary_fnc, dvelo_vary_fnc_d1, dvelo_vary_fnc_d2,
and dvelo_vary_fnc_d3. The first function returns the velocity component at a
specified coordinate and time value, the second, third, and fourth functions return the
derivative of the velocity component with x, y and z respectively.</p>
<p>A description of the syntax of this card follows:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>{UVARY | VVARY | WVARY}</strong></p></td>
<td><p>Five-character boundary condition name (&lt;bc_name&gt;)
identifies the velocity component:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>UVARY</strong> -X velocity component</p></li>
<li><p><strong>VVARY</strong> -Y velocity component</p></li>
<li><p><strong>WVARY</strong> -Z velocity component</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p><strong>SS</strong></p></td>
<td><p>Type of boundary condition (&lt;bc_type&gt;), where <strong>SS</strong>
denotes side set in the EXODUS II database.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;bc_id&gt;</p></td>
<td><p>The boundary flag identifier, an integer associated with
&lt;bc_type&gt; that identifies the boundary location (side set
in EXODUS II) in the problem domain.</p></td>
</tr>
<tr class="row-even"><td><p>[float_list]</p></td>
<td><p>An optional list of float values separated by spaces
which will be passed to the user-defined subroutines to
allow the user to vary the parameters of the boundary
condition. This list of float values is passed as a
onedimensional double array designated p in the parameter
list of all four C functions.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="examples">
<h2><strong>Examples</strong><a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<p>Following is a sample card for an X component</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BC</span> <span class="o">=</span> <span class="n">UVARY</span> <span class="n">SS</span> <span class="mi">10</span> <span class="mf">2.0</span> <span class="mf">4.0</span>
</pre></div>
</div>
<p>Following are the C functions that would have to be implemented in “user_bc.c” to
apply the preceding boundary condition card to set a parabolic velocity profile along a
sideset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">double</span> <span class="n">velo_vary_fnc</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">x</span><span class="p">,</span>
  <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">double</span> <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">double</span> <span class="n">max_speed</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">velo_condition</span> <span class="o">==</span> <span class="n">UVARY</span> <span class="p">)</span> <span class="p">{</span>
  <span class="n">f</span> <span class="o">=</span> <span class="n">max_speed</span><span class="o">*</span><span class="p">(</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">height</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d1</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d2</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">double</span> <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">double</span> <span class="n">max_speed</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">velo_condition</span> <span class="o">==</span> <span class="n">UVARY</span> <span class="p">)</span> <span class="p">{</span>
  <span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span><span class="o">*</span><span class="n">max_speed</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">height</span><span class="p">)</span><span class="o">/</span><span class="n">height</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
<span class="n">double</span> <span class="n">dvelo_vary_fnc_d3</span><span class="p">(</span> <span class="n">const</span> <span class="nb">int</span> <span class="n">velo_condition</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">z</span><span class="p">,</span> <span class="n">const</span> <span class="n">double</span> <span class="n">p</span><span class="p">[],</span> <span class="n">const</span>
  <span class="n">double</span> <span class="n">time</span> <span class="p">)</span>
<span class="p">{</span>
<span class="n">double</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">return</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="o">*/</span>
</pre></div>
</div>
</section>
<section id="technical-discussion">
<h2><strong>Technical Discussion</strong><a class="headerlink" href="#technical-discussion" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Including the sensitivities is a pain, but required since <em>Goma</em> has no provision for
computing Jacobian entries numerically.</p></li>
<li><p>Note that the type of boundary condition (<em>UVARY, VVARY</em>, or <em>WVARY</em>) is sent to
each function in the velo_condition parameter. Since there can be only one
set of definition functions in user_bc.c, this allows the user to overload these
functions to allow for more than one component defined in this manner. It would
also be possible to use these functions to make multiple definitions of the same
velocity component on different sidesets. However, this would have to be done by
sending an identifier through the p array.</p></li>
<li><p>This is a collocated-type boundary condition. It is applied exactly at nodal
locations but has lower precedence of application than direct Dirichlet conditions.</p></li>
</ul>
</section>
<section id="references">
<h2><strong>References</strong><a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<p>No References.</p>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description-usage">
   <strong>
    Description / Usage
   </strong>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   <strong>
    Examples
   </strong>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#technical-discussion">
   <strong>
    Technical Discussion
   </strong>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   <strong>
    References
   </strong>
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../../../_sources/problem_description_file/boundary_conditions/fluid_momentum/uvwvary.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2019 Goma Developers.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>